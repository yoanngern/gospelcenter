function initialize(){geocoder=new google.maps.Geocoder;var e=new google.maps.LatLng(46.5701302,6.82015709999996),o={zoom:8,center:e};if(map=new google.maps.Map(document.getElementById("map-canvas"),o),""!==$("#gospelcenter_locationbundle_location_latitude").val()&&""!==$("#gospelcenter_locationbundle_location_longitude").val()){var e=new google.maps.LatLng($("#gospelcenter_locationbundle_location_latitude").val(),$("#gospelcenter_locationbundle_location_longitude").val());marker=new google.maps.Marker({map:map,position:e,draggable:!0}),setLatLng(marker.getPosition().k,marker.getPosition().D)}else codeAddress();google.maps.event.addListener(marker,"drag",function(){setLatLng(marker.getPosition().k,marker.getPosition().D)})}function codeAddress(){var e=$("#gospelcenter_locationbundle_location_address1").val()+" "+$("#gospelcenter_locationbundle_location_address2").val()+" "+$("#gospelcenter_locationbundle_location_postalCode").val()+" "+$("#gospelcenter_locationbundle_location_city").val()+" "+$("#gospelcenter_locationbundle_location_country").val()+" ";geocoder.geocode({address:e},function(e,o){o==google.maps.GeocoderStatus.OK&&(map.setCenter(e[0].geometry.location),null===marker&&(marker=new google.maps.Marker({map:map,position:e[0].geometry.location,draggable:!0})),marker.setMap(map),marker.setPosition(e[0].geometry.location),setLatLng(marker.position.k,marker.position.D))})}function setLatLng(e,o){$('input[data-geo="lat"]').val(e),$('input[data-geo="long"]').val(o),$("div#geo-data div.lat").text("Lat. "+e),$("div#geo-data div.long").text("Long. "+o)}var geocoder,map,marker=null;$(document).ready(function(){initialize(),$("#gospelcenter_locationbundle_location_address1, #gospelcenter_locationbundle_location_address2, #gospelcenter_locationbundle_location_postalCode, #gospelcenter_locationbundle_location_city, #gospelcenter_locationbundle_location_country").on("input",function(){codeAddress()})});