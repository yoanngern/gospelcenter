/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 1.4.0
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
function resizeVideo(){var t=$(window).height(),e=$(window).height()-$("footer").height()-170,i=540,a=960;1*e>=360&&720>.9*e&&(i=.85*e),.9*e>720&&(i=720),360>1*e&&(i=360),a=16/9*i,$("section.video iframe").css("height",i),$("section.video iframe").css("width",a),$("section.video").css("width",a)}function dateRewrite(t){var e=Date.now();date=new Date($(t).attr("data-time")),date=$.timeago(date),$(t).text(date)}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function($){function t(){var t=e(this),o=n.settings;return isNaN(t.datetime)||(0==o.cutoff||a(t.datetime)<o.cutoff)&&$(this).text(i(t.datetime)),this}function e(t){if(t=$(t),!t.data("timeago")){t.data("timeago",{datetime:n.datetime(t)});var e=$.trim(t.text());n.settings.localeTitle?t.attr("title",t.data("timeago").datetime.toLocaleString()):!(e.length>0)||n.isTime(t)&&t.attr("title")||t.attr("title",e)}return t.data("timeago")}function i(t){return n.inWords(a(t))}function a(t){return(new Date).getTime()-t.getTime()}$.timeago=function(t){return i(t instanceof Date?t:"string"==typeof t?$.timeago.parse(t):"number"==typeof t?new Date(t):$.timeago.datetime(t))};var n=$.timeago;$.extend($.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(t){function e(e,a){var n=$.isFunction(e)?e(a,t):e,o=i.numbers&&i.numbers[a]||a;return n.replace(/%d/i,o)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var i=this.settings.strings,a=i.prefixAgo,n=i.suffixAgo;if(this.settings.allowFuture&&0>t&&(a=i.prefixFromNow,n=i.suffixFromNow),!this.settings.allowPast&&t>=0)return this.settings.strings.inPast;var o=Math.abs(t)/1e3,r=o/60,s=r/60,u=s/24,d=u/365,m=45>o&&e(i.seconds,Math.round(o))||90>o&&e(i.minute,1)||45>r&&e(i.minutes,Math.round(r))||90>r&&e(i.hour,1)||24>s&&e(i.hours,Math.round(s))||42>s&&e(i.day,1)||30>u&&e(i.days,Math.round(u))||45>u&&e(i.month,1)||365>u&&e(i.months,Math.round(u/30))||1.5>d&&e(i.year,1)||e(i.years,Math.round(d)),l=i.wordSeparator||"";return void 0===i.wordSeparator&&(l=" "),$.trim([a,m,n].join(l))},parse:function(t){var e=$.trim(t);return e=e.replace(/\.\d+/,""),e=e.replace(/-/,"/").replace(/-/,"/"),e=e.replace(/T/," ").replace(/Z/," UTC"),e=e.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),e=e.replace(/([\+\-]\d\d)$/," $100"),new Date(e)},datetime:function(t){var e=$(t).attr(n.isTime(t)?"datetime":"title");return n.parse(e)},isTime:function(t){return"time"===$(t).get(0).tagName.toLowerCase()}});var o={init:function(){var e=$.proxy(t,this);e();var i=n.settings;i.refreshMillis>0&&(this._timeagoInterval=setInterval(e,i.refreshMillis))},update:function(e){var i=n.parse(e);$(this).data("timeago",{datetime:i}),n.settings.localeTitle&&$(this).attr("title",i.toLocaleString()),t.apply(this)},updateFromDOM:function(){$(this).data("timeago",{datetime:n.parse($(this).attr(n.isTime(this)?"datetime":"title"))}),t.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};$.fn.timeago=function(t,e){var i=t?o[t]:o.init;if(!i)throw new Error("Unknown function name '"+t+"' for timeago");return this.each(function(){i.call(this,e)}),this},document.createElement("abbr"),document.createElement("time")}),$(document).ready(function(){resizeVideo(),$(window).resize(function(){resizeVideo()}),$(".duration").each(function(){dateRewrite(this)})});