/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 1.4.0
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
function resizeVideo(){var t=$(window).height(),e=$(window).height()-$("footer").height()-100,i=540,a=960;1*e>=360&&720>.9*e&&(i=.85*e),.9*e>720&&(i=720),360>1*e&&(i=360),a=16/9*i,$("section.video iframe").css("height",i),$("section.video iframe").css("width",a),$("section.video").css("width",a)}function dateRewrite(t){var e=Date.now();date=new Date($(t).attr("data-time")),date=$.timeago(date),$(t).text(date)}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(){var e=i(this),r=o.settings;return isNaN(e.datetime)||(0==r.cutoff||n(e.datetime)<r.cutoff)&&t(this).text(a(e.datetime)),this}function i(e){if(e=t(e),!e.data("timeago")){e.data("timeago",{datetime:o.datetime(e)});var i=t.trim(e.text());o.settings.localeTitle?e.attr("title",e.data("timeago").datetime.toLocaleString()):!(i.length>0)||o.isTime(e)&&e.attr("title")||e.attr("title",i)}return e.data("timeago")}function a(t){return o.inWords(n(t))}function n(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return a(e instanceof Date?e:"string"==typeof e?t.timeago.parse(e):"number"==typeof e?new Date(e):t.timeago.datetime(e))};var o=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(e){function i(i,n){var o=t.isFunction(i)?i(n,e):i,r=a.numbers&&a.numbers[n]||n;return o.replace(/%d/i,r)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var a=this.settings.strings,n=a.prefixAgo,o=a.suffixAgo;if(this.settings.allowFuture&&0>e&&(n=a.prefixFromNow,o=a.suffixFromNow),!this.settings.allowPast&&e>=0)return this.settings.strings.inPast;var r=Math.abs(e)/1e3,s=r/60,u=s/60,d=u/24,m=d/365,l=45>r&&i(a.seconds,Math.round(r))||90>r&&i(a.minute,1)||45>s&&i(a.minutes,Math.round(s))||90>s&&i(a.hour,1)||24>u&&i(a.hours,Math.round(u))||42>u&&i(a.day,1)||30>d&&i(a.days,Math.round(d))||45>d&&i(a.month,1)||365>d&&i(a.months,Math.round(d/30))||1.5>m&&i(a.year,1)||i(a.years,Math.round(m)),f=a.wordSeparator||"";return void 0===a.wordSeparator&&(f=" "),t.trim([n,l,o].join(f))},parse:function(e){var i=t.trim(e);return i=i.replace(/\.\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),i=i.replace(/([\+\-]\d\d)$/," $100"),new Date(i)},datetime:function(e){var i=t(e).attr(o.isTime(e)?"datetime":"title");return o.parse(i)},isTime:function(e){return"time"===t(e).get(0).tagName.toLowerCase()}});var r={init:function(){var i=t.proxy(e,this);i();var a=o.settings;a.refreshMillis>0&&(this._timeagoInterval=setInterval(i,a.refreshMillis))},update:function(i){var a=o.parse(i);t(this).data("timeago",{datetime:a}),o.settings.localeTitle&&t(this).attr("title",a.toLocaleString()),e.apply(this)},updateFromDOM:function(){t(this).data("timeago",{datetime:o.parse(t(this).attr(o.isTime(this)?"datetime":"title"))}),e.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};t.fn.timeago=function(t,e){var i=t?r[t]:r.init;if(!i)throw new Error("Unknown function name '"+t+"' for timeago");return this.each(function(){i.call(this,e)}),this},document.createElement("abbr"),document.createElement("time")}),$(document).ready(function(){resizeVideo(),$(window).resize(function(){resizeVideo()}),$(".duration").each(function(){dateRewrite(this)})});